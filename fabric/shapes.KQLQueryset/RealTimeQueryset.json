{"payload":{"tabs":[{"id":"3378f3a9-29a6-4251-aa1a-253d553e01fd","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":41,"endColumn":1},"title":"GoldShapes","text":".create function with (docstring = \"Extract shapes from GoldAlarms into a uniform schema.\", folder=\"View\") GoldShapes() {\n    GoldAlarmsLatestUpdate\n    | where alarm_gold_timestamp > ago(90sec)\n    | join kind=inner (\n        GoldFlights \n        | project callsign, linestring_wkt, longitude, latitude, true_track\n        ) on callsign\n    | join kind=inner (\n        GoldWeather \n        | project isigmetId, polygon_wkt, hazard\n        ) on isigmetId\n    | extend Packed=bag_pack(\"longitude_latitude\", strcat(longitude, \"_\", latitude), \"linestring_wkt\", linestring_wkt, \"polygon_wkt\", polygon_wkt)\n    | mv-expand kind=array Packed\n    | extend wkt_id = strcat(id, Packed[0]), wkt_type = Packed[0]\n    | extend size = 1000\n    | extend image_or_wkt =iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), Packed[1], \"https://em-content.zobj.net/source/microsoft-teams/363/airplane_2708-fe0f.png\")\n    | extend longitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), longitude)\n    | extend longitude_destination = toreal(\"\")\n    | extend latitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), latitude)\n    | extend latitude_destination = toreal(\"\")\n    | extend label =  iff((wkt_type in (\"polygon_wkt\")), hazard, \"\")\n    | extend colour = \"#023047\"\n    | extend colour =  iff((label == \"TS\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"TSGR\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"ICE\"), \"#8ECAE6\", colour)\n    | extend colour =  iff((label == \"DS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"SS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"VA\"), \"#FB8500\", colour)\n    | extend label =  iff((label == \"TS\"), \"Thunderstorm üå©Ô∏è\", label)\n    | extend label =  iff((label == \"TSGR\"), \"Hail ‚õàÔ∏è\", label)\n    | extend label =  iff((label == \"TURB\"), \"Turbulence üå¨Ô∏è\", label)\n    | extend label =  iff((label == \"ICE\"), \"Icing üßä\", label)\n    | extend label =  iff((label == \"MTW\"), \"Mountiain Wave ‚õ∞Ô∏è\", label)\n    | extend label =  iff((label == \"DS\"), \"Duststorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"SS\"), \"Sandstorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"TC\"), \"Tropical Cyclone üå™Ô∏è\", label)\n    | extend label =  iff((label == \"VA\"), \"Volcanic Ash üåã\", label)\n    | project id, image_or_wkt, wkt_id, wkt_type, colour, longitude, latitude, longitude_destination, latitude_destination, label, size\n}\n\n.drop function GoldShapes","commandInContext":".create function with (docstring = \"Extract shapes from GoldAlarms into a uniform schema.\", folder=\"View\") GoldShapes() {\n    GoldAlarmsLatestUpdate\n    | where alarm_gold_timestamp > ago(90sec)\n    | join kind=inner (\n        GoldFlights \n        | project callsign, linestring_wkt, longitude, latitude, true_track\n        ) on callsign\n    | join kind=inner (\n        GoldWeather \n        | project isigmetId, polygon_wkt, hazard\n        ) on isigmetId\n    | extend Packed=bag_pack(\"longitude_latitude\", strcat(longitude, \"_\", latitude), \"linestring_wkt\", linestring_wkt, \"polygon_wkt\", polygon_wkt)\n    | mv-expand kind=array Packed\n    | extend wkt_id = strcat(id, Packed[0]), wkt_type = Packed[0]\n    | extend size = 1000\n    | extend image_or_wkt =iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), Packed[1], \"https://em-content.zobj.net/source/microsoft-teams/363/airplane_2708-fe0f.png\")\n    | extend longitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), longitude)\n    | extend longitude_destination = toreal(\"\")\n    | extend latitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), latitude)\n    | extend latitude_destination = toreal(\"\")\n    | extend label =  iff((wkt_type in (\"polygon_wkt\")), hazard, \"\")\n    | extend colour = \"#023047\"\n    | extend colour =  iff((label == \"TS\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"TSGR\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"ICE\"), \"#8ECAE6\", colour)\n    | extend colour =  iff((label == \"DS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"SS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"VA\"), \"#FB8500\", colour)\n    | extend label =  iff((label == \"TS\"), \"Thunderstorm üå©Ô∏è\", label)\n    | extend label =  iff((label == \"TSGR\"), \"Hail ‚õàÔ∏è\", label)\n    | extend label =  iff((label == \"TURB\"), \"Turbulence üå¨Ô∏è\", label)\n    | extend label =  iff((label == \"ICE\"), \"Icing üßä\", label)\n    | extend label =  iff((label == \"MTW\"), \"Mountiain Wave ‚õ∞Ô∏è\", label)\n    | extend label =  iff((label == \"DS\"), \"Duststorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"SS\"), \"Sandstorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"TC\"), \"Tropical Cyclone üå™Ô∏è\", label)\n    | extend label =  iff((label == \"VA\"), \"Volcanic Ash üåã\", label)\n    | project id, image_or_wkt, wkt_id, wkt_type, colour, longitude, latitude, longitude_destination, latitude_destination, label, size\n}\n\n","executionStatus":"notStarted","clientRequestId":null,"entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".create function with (docstring = \"Extract shapes from GoldAlarms into a uniform schema.\", folder=\"View\") GoldShapes() {\n    GoldAlarmsLatestUpdate\n    | where alarm_gold_timestamp > ago(90sec)\n    | join kind=inner (\n        GoldFlights \n        | project callsign, linestring_wkt, longitude, latitude, true_track\n        ) on callsign\n    | join kind=inner (\n        GoldWeather \n        | project isigmetId, polygon_wkt, hazard\n        ) on isigmetId\n    | extend Packed=bag_pack(\"longitude_latitude\", strcat(longitude, \"_\", latitude), \"linestring_wkt\", linestring_wkt, \"polygon_wkt\", polygon_wkt)\n    | mv-expand kind=array Packed\n    | extend wkt_id = strcat(id, Packed[0]), wkt_type = Packed[0]\n    | extend size = 1000\n    | extend image_or_wkt =iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), Packed[1], \"https://em-content.zobj.net/source/microsoft-teams/363/airplane_2708-fe0f.png\")\n    | extend longitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), longitude)\n    | extend longitude_destination = toreal(\"\")\n    | extend latitude = iff((wkt_type in (\"linestring_wkt\", \"polygon_wkt\")), toreal(\"\"), latitude)\n    | extend latitude_destination = toreal(\"\")\n    | extend label =  iff((wkt_type in (\"polygon_wkt\")), hazard, \"\")\n    | extend colour = \"#023047\"\n    | extend colour =  iff((label == \"TS\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"TSGR\"), \"#219EBC\", colour)\n    | extend colour =  iff((label == \"ICE\"), \"#8ECAE6\", colour)\n    | extend colour =  iff((label == \"DS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"SS\"), \"#FFB703\", colour)\n    | extend colour =  iff((label == \"VA\"), \"#FB8500\", colour)\n    | extend label =  iff((label == \"TS\"), \"Thunderstorm üå©Ô∏è\", label)\n    | extend label =  iff((label == \"TSGR\"), \"Hail ‚õàÔ∏è\", label)\n    | extend label =  iff((label == \"TURB\"), \"Turbulence üå¨Ô∏è\", label)\n    | extend label =  iff((label == \"ICE\"), \"Icing üßä\", label)\n    | extend label =  iff((label == \"MTW\"), \"Mountiain Wave ‚õ∞Ô∏è\", label)\n    | extend label =  iff((label == \"DS\"), \"Duststorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"SS\"), \"Sandstorm üå™Ô∏è\", label)\n    | extend label =  iff((label == \"TC\"), \"Tropical Cyclone üå™Ô∏è\", label)\n    | extend label =  iff((label == \"VA\"), \"Volcanic Ash üåã\", label)\n    | project id, image_or_wkt, wkt_id, wkt_type, colour, longitude, latitude, longitude_destination, latitude_destination, label, size\n}","hideEmptyColumns":false,"cursorPosition":{"lineNumber":22,"column":32}},{"id":"74132dd0-8fec-4484-9909-6d2bd8d50a1e","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":2,"endColumn":8},"text":"GoldShapes\n| count","commandInContext":"GoldShapes\n| count","executionStatus":"done","clientRequestId":"Kusto.Web.RTA.QuerySet;bf9fb718-f6b1-46c9-be72-30cc3318786f;d00a3f47-d887-4cb7-8a57-3f81d2267f5e","completionInfo":-1770484412,"entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"Query","commandWithoutLeadingComments":"GoldShapes\n| count","hideEmptyColumns":false,"cursorPosition":{"lineNumber":2,"column":8}}],"tabInContext":"74132dd0-8fec-4484-9909-6d2bd8d50a1e","connections":{"trd-kz4sd5vknmz3u5t26m.z2":{"clusterType":"Engine","name":"trd-kz4sd5vknmz3u5t26m.z2","connectionString":"https://trd-kz4sd5vknmz3u5t26m.z2.kusto.fabric.microsoft.com","initialCatalog":"ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","databases":{"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8":{"id":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","name":"ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","prettyName":"eh","fetchState":"notStarted","fetchStateError":"","tables":{},"functions":{},"entityGroups":{},"accessMode":"ReadWrite","minorVersion":4,"majorVersion":15948}},"id":"trd-kz4sd5vknmz3u5t26m.z2","fetchState":"done","fetchStateError":"","tooBigToCache":true,"serviceOffering":"Trident"}}}}