{"payload":{"tabs":[{"id":"027c8e85-f562-4cb7-9d86-edb438452fa5","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":18,"endColumn":62},"title":"Create bronze","text":".execute database script <|\n.create table BronzeAircrafts (\n    id: string,\n    type: string,\n    icao_type: string,\n    manufacturer: string,\n    mode_s: string,\n    registration: string,\n    registered_owner_country_iso_name: string,\n    registered_owner_country_name: string,\n    registered_owner_operator_flag_code: string,\n    registered_owner: string,\n    url_photo: string,\n    url_photo_thumbnail: string,\n    valid: boolean\n)\n.create table ['BronzeAircrafts'] ingestion json mapping 'BronzeAircrafts_mapping' '[{\"column\":\"id\", \"Properties\":{\"Path\":\"$[\\'id\\']\"}},{\"column\":\"type\", \"Properties\":{\"Path\":\"$[\\'type\\']\"}},{\"column\":\"icao_type\", \"Properties\":{\"Path\":\"$[\\'icao_type\\']\"}},{\"column\":\"manufacturer\", \"Properties\":{\"Path\":\"$[\\'manufacturer\\']\"}},{\"column\":\"mode_s\", \"Properties\":{\"Path\":\"$[\\'mode_s\\']\"}},{\"column\":\"registration\", \"Properties\":{\"Path\":\"$[\\'registration\\']\"}},{\"column\":\"registered_owner_country_iso_name\", \"Properties\":{\"Path\":\"$[\\'registered_owner_country_iso_name\\']\"}},{\"column\":\"registered_owner_country_name\", \"Properties\":{\"Path\":\"$[\\'registered_owner_country_name\\']\"}},{\"column\":\"registered_owner_operator_flag_code\", \"Properties\":{\"Path\":\"$[\\'registered_owner_operator_flag_code\\']\"}},{\"column\":\"registered_owner\", \"Properties\":{\"Path\":\"$[\\'registered_owner\\']\"}},{\"column\":\"url_photo\", \"Properties\":{\"Path\":\"$[\\'url_photo\\']\"}},{\"column\":\"url_photo_thumbnail\", \"Properties\":{\"Path\":\"$[\\'url_photo_thumbnail\\']\"}},{\"column\":\"valid\", \"Properties\":{\"Path\":\"$[\\'valid\\']\"}}]'\n.alter table BronzeAircrafts policy streamingingestion enable","commandInContext":".alter table BronzeAircrafts policy streamingingestion enable","executionStatus":"done","clientRequestId":"Kusto.Web.RTA.QuerySet;bd7b9b0f-0501-42d5-8afb-7291a5b9648b;5b4e1ad3-7fc6-48b1-9cf9-60172ca39fb4","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".alter table BronzeAircrafts policy streamingingestion enable","hideEmptyColumns":false,"cursorPosition":{"lineNumber":18,"column":1}},{"id":"5b6b6c63-c760-4900-a3f2-69042faa43cb","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":1,"endColumn":34},"title":"Clear bronze","text":".clear table BronzeAircrafts data","commandInContext":".clear table BronzeAircrafts data","executionStatus":"done","clientRequestId":"Kusto.Web.RTA.QuerySet;bd7b9b0f-0501-42d5-8afb-7291a5b9648b;329e5d0f-b2fb-4706-b7f3-1038ce3ce601","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".clear table BronzeAircrafts data","hideEmptyColumns":false,"cursorPosition":{"lineNumber":1,"column":1}},{"id":"3c4d4609-8649-4cf8-afc5-455cb85b8745","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":20,"endColumn":1},"title":"Create Silver","text":".execute database script <|\n.create table SilverAircrafts (\n    type: string,\n    icao_type: string,\n    manufacturer: string,\n    mode_s: string,\n    registration: string,\n    registered_owner_country_iso_name: string,\n    registered_owner_country_name: string,\n    registered_owner_operator_flag_code: string,\n    registered_owner: string,\n    url_photo: string,\n    url_photo_thumbnail: string,\n    valid: bool,\n    icao24: string,\n    bronze_timestamp: datetime,\n    silver_timestamp: datetime\n)\n.alter-merge table SilverAircrafts policy update @'[{\"IsEnabled\": true, \"Source\": \"BronzeAircrafts\", \"Query\": \"BronzeAircrafts | extend icao24 = id | project-away id | extend bronze_timestamp = ingestion_time() | extend silver_timestamp = now()\", \"IsTransactional\": false}]'\n","commandInContext":"timestamp = now()\", \"","executionStatus":"gotFromCache","clientRequestId":"Kusto.Web.RTA.QuerySet;967cde03-d1d8-446a-ad11-a7bd7c9e9cac;bba08663-67cf-4b02-aa5a-62af4cf9688a","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"Query","commandWithoutLeadingComments":"timestamp = now()\", \"","hideEmptyColumns":false,"cursorPosition":{"lineNumber":19,"column":249}},{"id":"e3f86529-7f67-4f2b-af02-76b8fd54e172","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":4,"endColumn":275},"title":"Clear Silver","text":".execute database script <|\n.clear table SilverAircrafts data\n.delete table SilverAircrafts policy update\n.alter-merge table SilverAircrafts policy update @'[{\"IsEnabled\": true, \"Source\": \"BronzeAircrafts\", \"Query\": \"BronzeAircrafts | extend icao24 = id | project-away id | extend bronze_timestamp = ingestion_time() | extend silver_timestamp = now()\", \"IsTransactional\": false}]'","commandInContext":".execute database script <|\n.clear table SilverAircrafts data\n.delete table SilverAircrafts policy update\n.alter-merge table SilverAircrafts policy update @'[{\"IsEnabled\": true, \"Source\": \"BronzeAircrafts\", \"Query\": \"BronzeAircrafts | extend icao24 = id | project-away id | extend bronze_timestamp = ingestion_time() | extend silver_timestamp = now()\", \"IsTransactional\": false}]'","executionStatus":"done","clientRequestId":"Kusto.Web.RTA.QuerySet;bd7b9b0f-0501-42d5-8afb-7291a5b9648b;f9e043d1-2076-41fa-92f5-a6de640bd265","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".execute database script <|\n.clear table SilverAircrafts data\n.delete table SilverAircrafts policy update\n.alter-merge table SilverAircrafts policy update @'[{\"IsEnabled\": true, \"Source\": \"BronzeAircrafts\", \"Query\": \"BronzeAircrafts | extend icao24 = id | project-away id | extend bronze_timestamp = ingestion_time() | extend silver_timestamp = now()\", \"IsTransactional\": false}]'","hideEmptyColumns":false,"cursorPosition":{"lineNumber":4,"column":275}},{"id":"0041e7af-33ae-483d-9fd2-616145627da8","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":7,"endColumn":2},"title":"Valid Aircrafts view","text":".create-or-alter function with (docstring = \"Preprocessed view filtering valid aircrafts and renaming common columns.\", folder = \"View\")\nvalid_aircrafts() {\nSilverAircrafts\n| where valid\n| project-away valid\n| project-rename aircrafts_bronze_timestamp=bronze_timestamp, aircrafts_silver_timestamp=silver_timestamp\n}","commandInContext":".create-or-alter function with (docstring = \"Preprocessed view filtering valid aircrafts and renaming common columns.\", folder = \"View\")\nvalid_aircrafts() {\nSilverAircrafts\n| where valid\n| project-away valid\n| project-rename aircrafts_bronze_timestamp=bronze_timestamp, aircrafts_silver_timestamp=silver_timestamp\n}","executionStatus":"gotFromCache","clientRequestId":"Kusto.Web.RTA.QuerySet;bd7b9b0f-0501-42d5-8afb-7291a5b9648b;89704323-a05a-4fa1-b0b4-f982c24a9a01","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".create-or-alter function with (docstring = \"Preprocessed view filtering valid aircrafts and renaming common columns.\", folder = \"View\")\nvalid_aircrafts() {\nSilverAircrafts\n| where valid\n| project-away valid\n| project-rename aircrafts_bronze_timestamp=bronze_timestamp, aircrafts_silver_timestamp=silver_timestamp\n}","hideEmptyColumns":false,"cursorPosition":{"lineNumber":7,"column":2}},{"id":"2a405e39-a060-41f0-89f5-2fb3bdc6f123","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":2,"endColumn":35},"title":"exploration","text":"SilverAircrafts\n| summarize  max(bronze_timestamp)","commandInContext":"SilverAircrafts\n| summarize  max(bronze_timestamp)","executionStatus":"done","clientRequestId":"Kusto.Web.RTA.QuerySet;967cde03-d1d8-446a-ad11-a7bd7c9e9cac;b6c2606d-5976-4242-ae6b-3d295ec4806d","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"Query","commandWithoutLeadingComments":"SilverAircrafts\n| summarize  max(bronze_timestamp)","hideEmptyColumns":false,"cursorPosition":{"lineNumber":2,"column":35}},{"id":"5e1f0e23-949b-454b-a6a1-d9796467658d","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":9,"endColumn":2},"title":"Create silver old","text":".create-or-alter materialized-view SilverAircrafts on table BronzeAircrafts\n{\nBronzeAircrafts\n| extend icao24 = id\n| project-away id\n| extend bronze_timestamp = ingestion_time()\n| extend silver_timestamp = now()\n| summarize arg_max(bronze_timestamp, *) by icao24\n}","commandInContext":".create-or-alter materialized-view SilverAircrafts on table BronzeAircrafts\n{\nBronzeAircrafts\n| extend icao24 = id\n| project-away id\n| extend bronze_timestamp = ingestion_time()\n| extend silver_timestamp = now()\n| summarize arg_max(bronze_timestamp, *) by icao24\n}","executionStatus":"gotFromCache","clientRequestId":"Kusto.Web.RTA.QuerySet;0602e69b-45b0-481e-ae43-76ad39f97610;89db04fc-a012-48cc-9069-a939469b43ab","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".create-or-alter materialized-view SilverAircrafts on table BronzeAircrafts\n{\nBronzeAircrafts\n| extend icao24 = id\n| project-away id\n| extend bronze_timestamp = ingestion_time()\n| extend silver_timestamp = now()\n| summarize arg_max(bronze_timestamp, *) by icao24\n}","hideEmptyColumns":false,"cursorPosition":{"lineNumber":3,"column":1}},{"id":"21b25c7e-12a6-45d6-b7e6-d0447042a005","queryRange":{"startLineNumber":1,"startColumn":1,"endLineNumber":1,"endColumn":40},"title":"Clear silver old","text":".drop materialized-view SilverAircrafts","commandInContext":".drop materialized-view SilverAircrafts","executionStatus":"gotFromCache","clientRequestId":"Kusto.Web.RTA.QuerySet;967cde03-d1d8-446a-ad11-a7bd7c9e9cac;de02cf76-985c-49fb-aee0-5e0440c2575c","entityInContext":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","commandType":"AdminCommand","commandWithoutLeadingComments":".drop materialized-view SilverAircrafts","hideEmptyColumns":false,"cursorPosition":{"lineNumber":1,"column":40}}],"tabInContext":"2a405e39-a060-41f0-89f5-2fb3bdc6f123","connections":{"trd-kz4sd5vknmz3u5t26m.z2":{"clusterType":"Engine","name":"trd-kz4sd5vknmz3u5t26m.z2","connectionString":"https://trd-kz4sd5vknmz3u5t26m.z2.kusto.fabric.microsoft.com","initialCatalog":"ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","databases":{"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8":{"id":"trd-kz4sd5vknmz3u5t26m.z2/ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","name":"ac257cd3-e45d-4c3c-a1d8-b4589541f6c8","prettyName":"eh","fetchState":"notStarted","fetchStateError":"","tables":{},"functions":{},"entityGroups":{},"accessMode":"ReadWrite","minorVersion":0,"majorVersion":2700}},"id":"trd-kz4sd5vknmz3u5t26m.z2","fetchState":"done","fetchStateError":"","tooBigToCache":true,"serviceOffering":"Trident"}}}}